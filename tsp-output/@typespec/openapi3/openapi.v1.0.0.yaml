openapi: 3.0.0
info:
  title: Aroundy
  description: Aroundy 앱 및 어드민 페이지 공용 API
  version: v1.0.0
tags:
  - name: App
paths:
  /companies:
    get:
      tags:
        - App
      operationId: Companies_fetchCompanies
      summary: 기업 조회 및 검색
      description: 기업 목록을 추천 기준에 따라 조회 및 검색한다.
      parameters:
        - name: search
          in: query
          required: false
          description: |-
            검색어

            초성 검색 지원
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                required:
                  - items
                  - page
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/Company'
                    description: 실제 데이터
                  page:
                    type: object
                    properties:
                      totalRecords:
                        type: integer
                        format: uint64
                        description: 검색된 총 항목 수
                      totalPages:
                        type: integer
                        format: uint64
                        description: 총 페이지 갯수
                      pageSize:
                        type: integer
                        format: uint64
                        description: 현재 페이지에 포함된 항목 수
                      nextPage:
                        type: integer
                        format: uint64
                        nullable: true
                        description: |-
                          다음 페이지 번호

                          현재 페이지가 마지막 페이지인 경우 `nextPage`는 `null`이 된다.
                      nextRecords:
                        type: integer
                        format: uint64
                        description: |-
                          다음 페이지에 나타날 항목 수

                          다음 페이지가 마지막 페이지일 경우 페이지 크기로 나누어 떨어지지 않는 값이 들어간다.
                          다음 페이지 로딩 전 표시할 스켈레톤 갯수를 맞추기 위해 사용한다.
                    required:
                      - totalRecords
                      - totalPages
                      - pageSize
                      - nextPage
                      - nextRecords
                    description: 페이지 메타데이터
                description: 페이징 메타데이터
    post:
      operationId: Companies_createCompany
      summary: 새 기업 등록
      parameters: []
      responses:
        '201':
          description: The request has succeeded and a new resource has been created as a result.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Company'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BaseCompany'
      security:
        - BearerAuth: []
  /companies/{id}:
    patch:
      operationId: Companies_updateCompany
      summary: 기업정보 수정
      parameters:
        - $ref: '#/components/parameters/ById'
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Company'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  description: 기업명
                logo:
                  type: string
                  format: uri
                  description: 기업 로고
                active:
                  type: boolean
                  description: 상태
              description: The template for adding optional properties.
      security:
        - BearerAuth: []
    delete:
      operationId: Companies_deleteCompany
      summary: 기업정보 삭제
      parameters:
        - $ref: '#/components/parameters/ById'
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Company'
      security:
        - BearerAuth: []
  /images/upload:
    post:
      operationId: uploadImage
      summary: 이미지 업로드
      parameters: []
      responses:
        '201':
          description: The request has succeeded and a new resource has been created as a result.
          content:
            application/json:
              schema:
                type: object
                properties:
                  urls:
                    type: array
                    items:
                      type: string
                      format: uri
                    description: 업로드된 이미지 URL 배열
                required:
                  - urls
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                images:
                  type: array
                  items:
                    $ref: '#/components/schemas/Image'
                  description: 업로드할 이미지 정보 배열
              required:
                - images
      security:
        - BearerAuth: []
  /login/kakao:
    get:
      tags:
        - App
      operationId: Login_kakao
      summary: 카카오 로그인
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
  /posts:
    get:
      tags:
        - App
      operationId: Posts_fetchPosts
      summary: Post 조회 및 검색
      description: Post 목록을 추천 기준에 따라 조회 및 검색한다.
      parameters:
        - $ref: '#/components/parameters/Posts.QueryOption.category'
        - $ref: '#/components/parameters/Posts.QueryOption.sort'
        - $ref: '#/components/parameters/Posts.QueryOption.companies'
        - $ref: '#/components/parameters/Posts.QueryOption.location'
        - $ref: '#/components/parameters/Posts.QueryOption.tags'
        - $ref: '#/components/parameters/Posts.QueryOption.ended'
        - $ref: '#/components/parameters/Posts.QueryOption.search'
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                required:
                  - items
                  - page
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/Post'
                    description: 실제 데이터
                  page:
                    type: object
                    properties:
                      totalRecords:
                        type: integer
                        format: uint64
                        description: 검색된 총 항목 수
                      totalPages:
                        type: integer
                        format: uint64
                        description: 총 페이지 갯수
                      pageSize:
                        type: integer
                        format: uint64
                        description: 현재 페이지에 포함된 항목 수
                      nextPage:
                        type: integer
                        format: uint64
                        nullable: true
                        description: |-
                          다음 페이지 번호

                          현재 페이지가 마지막 페이지인 경우 `nextPage`는 `null`이 된다.
                      nextRecords:
                        type: integer
                        format: uint64
                        description: |-
                          다음 페이지에 나타날 항목 수

                          다음 페이지가 마지막 페이지일 경우 페이지 크기로 나누어 떨어지지 않는 값이 들어간다.
                          다음 페이지 로딩 전 표시할 스켈레톤 갯수를 맞추기 위해 사용한다.
                    required:
                      - totalRecords
                      - totalPages
                      - pageSize
                      - nextPage
                      - nextRecords
                    description: 페이지 메타데이터
                description: 페이징 메타데이터
    post:
      operationId: Posts_createPost
      summary: 새 Post 등록
      parameters: []
      responses:
        '201':
          description: The request has succeeded and a new resource has been created as a result.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Post'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePost'
      security:
        - BearerAuth: []
  /posts/{id}:
    patch:
      operationId: Posts_updatePost
      summary: Post 수정
      parameters:
        - $ref: '#/components/parameters/ById'
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Post'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                  description: 제목
                category:
                  type: string
                  description: 카테고리
                feeds:
                  type: array
                  items:
                    type: string
                    format: uri
                  maxItems: 10
                  description: 피드 배너 이미지 목록
                caption:
                  type: string
                  maxLength: 2200
                  description: Post 상세 내용
                type:
                  allOf:
                    - $ref: '#/components/schemas/EventType'
                  description: 이벤트 유형
                location:
                  type: string
                  nullable: true
                  description: 상세주소
                contact:
                  type: string
                  nullable: true
                  description: 연락처
                pricing:
                  type: integer
                  format: uint64
                  nullable: true
                  description: 가격
                discountRate:
                  type: integer
                  format: uint64
                  nullable: true
                  description: 할인률
                startsAt:
                  type: string
                  format: date-time
                  description: 오픈일
                endsAt:
                  type: string
                  format: date-time
                  nullable: true
                  description: 종료일
                link:
                  type: string
                  format: uri
                  nullable: true
                  description: 출처 링크
                tagIds:
                  type: array
                  items:
                    $ref: '#/components/schemas/id'
                  description: 태그 id 목록
              description: The template for adding optional properties.
      security:
        - BearerAuth: []
    delete:
      operationId: Posts_deletePost
      summary: Post 삭제
      parameters:
        - $ref: '#/components/parameters/ById'
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Post'
      security:
        - BearerAuth: []
  /posts/{id}/like:
    patch:
      tags:
        - App
      operationId: Posts_like
      summary: 좋아요 추가
      parameters:
        - $ref: '#/components/parameters/ById'
      responses:
        '204':
          description: 'There is no content to send for this request, but the headers may be useful. '
      security:
        - BearerAuth: []
  /posts/{id}/save:
    patch:
      tags:
        - App
      operationId: Posts_save
      summary: 마이페이지에 저장
      parameters:
        - $ref: '#/components/parameters/ById'
      responses:
        '204':
          description: 'There is no content to send for this request, but the headers may be useful. '
      security:
        - BearerAuth: []
  /posts/{id}/unlike:
    patch:
      tags:
        - App
      operationId: Posts_unlike
      summary: 좋아요 해제
      parameters:
        - $ref: '#/components/parameters/ById'
      responses:
        '204':
          description: 'There is no content to send for this request, but the headers may be useful. '
      security:
        - BearerAuth: []
  /posts/{id}/unsave:
    patch:
      tags:
        - App
      operationId: Posts_unsave
      summary: 마이페이지에서 저장 취소
      parameters:
        - $ref: '#/components/parameters/ById'
      responses:
        '204':
          description: 'There is no content to send for this request, but the headers may be useful. '
      security:
        - BearerAuth: []
  /posts/{id}/view:
    patch:
      tags:
        - App
      operationId: Posts_view
      summary: 조회수 증가
      parameters:
        - $ref: '#/components/parameters/ById'
      responses:
        '204':
          description: 'There is no content to send for this request, but the headers may be useful. '
  /users:
    get:
      operationId: Users_fetchUsers
      summary: 회원 조회 및 검색
      parameters:
        - name: search
          in: query
          required: false
          description: |-
            검색어

            초성 검색 지원
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                required:
                  - items
                  - page
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/User'
                    description: 실제 데이터
                  page:
                    type: object
                    properties:
                      totalRecords:
                        type: integer
                        format: uint64
                        description: 검색된 총 항목 수
                      totalPages:
                        type: integer
                        format: uint64
                        description: 총 페이지 갯수
                      pageSize:
                        type: integer
                        format: uint64
                        description: 현재 페이지에 포함된 항목 수
                      nextPage:
                        type: integer
                        format: uint64
                        nullable: true
                        description: |-
                          다음 페이지 번호

                          현재 페이지가 마지막 페이지인 경우 `nextPage`는 `null`이 된다.
                      nextRecords:
                        type: integer
                        format: uint64
                        description: |-
                          다음 페이지에 나타날 항목 수

                          다음 페이지가 마지막 페이지일 경우 페이지 크기로 나누어 떨어지지 않는 값이 들어간다.
                          다음 페이지 로딩 전 표시할 스켈레톤 갯수를 맞추기 위해 사용한다.
                    required:
                      - totalRecords
                      - totalPages
                      - pageSize
                      - nextPage
                      - nextRecords
                    description: 페이지 메타데이터
                description: 페이징 메타데이터
  /users/{id}:
    get:
      operationId: Users_fetchUser
      summary: 단일 회원정보 조회
      parameters:
        - $ref: '#/components/parameters/ById'
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
      security:
        - BearerAuth: []
    patch:
      operationId: Users_updateUser
      summary: 회원 개인정보 수정
      parameters:
        - $ref: '#/components/parameters/ById'
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                gender:
                  oneOf:
                    - $ref: '#/components/schemas/Gender'
                  nullable: true
                  description: 회원 성별
                email:
                  type: string
                  format: email
                  description: 이메일
                telephone:
                  type: string
                  nullable: true
                  description: 전화번호
                birth:
                  type: string
                  format: date
                  nullable: true
                  description: 생년월일
                name:
                  type: string
                  description: 사용자 실명
              description: The template for adding optional properties.
      security:
        - BearerAuth: []
    delete:
      operationId: Users_deleteUser
      summary: 회원 탈퇴
      parameters:
        - $ref: '#/components/parameters/ById'
      responses:
        '204':
          description: 'There is no content to send for this request, but the headers may be useful. '
      security:
        - BearerAuth: []
  /users/{id}/profile:
    get:
      operationId: Users_profile
      summary: 회원 프로필 정보 조회
      parameters:
        - $ref: '#/components/parameters/ById'
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProfile'
      security:
        - BearerAuth: []
components:
  parameters:
    ById:
      name: id
      in: path
      required: true
      schema:
        $ref: '#/components/schemas/id'
    Posts.QueryOption.category:
      name: category
      in: query
      required: false
      description: 한정할 카테고리
      schema:
        type: string
    Posts.QueryOption.companies:
      name: companies
      in: query
      required: false
      description: 브랜드 한정 필터
      schema:
        type: array
        items:
          type: string
      style: form
      explode: false
    Posts.QueryOption.ended:
      name: ended
      in: query
      required: false
      description: |-
        이벤트 상태 필터

        - `undefined`: 상태 무관
        - `true`: 종료된 이벤트만
        - `false`: 진행 중인 이벤트만
      schema:
        type: boolean
    Posts.QueryOption.location:
      name: location
      in: query
      required: false
      description: |-
        지역 필터

        아무 값도 없을 때는 지역 무관

        지역은 여러 개 선택 가능
      schema:
        type: array
        items:
          $ref: '#/components/schemas/Location'
      style: form
      explode: false
    Posts.QueryOption.search:
      name: search
      in: query
      required: false
      description: |-
        검색어

        초성 검색 지원
      schema:
        type: string
    Posts.QueryOption.sort:
      name: sort
      in: query
      required: false
      description: 추천 기준
      schema:
        $ref: '#/components/schemas/SortOption'
    Posts.QueryOption.tags:
      name: tags
      in: query
      required: false
      description: 태그 한정 필터
      schema:
        type: array
        items:
          $ref: '#/components/schemas/id'
      style: form
      explode: false
  schemas:
    BaseCompany:
      type: object
      required:
        - name
        - logo
        - active
      properties:
        name:
          type: string
          description: 기업명
        logo:
          type: string
          format: uri
          description: 기업 로고
        active:
          type: boolean
          description: 상태
      description: 상속용 Company 클래스
    BasePost:
      type: object
      required:
        - title
        - category
        - feeds
        - caption
        - type
        - location
        - contact
        - pricing
        - discountRate
        - startsAt
        - endsAt
        - link
      properties:
        title:
          type: string
          description: 제목
        category:
          type: string
          description: 카테고리
        feeds:
          type: array
          items:
            type: string
            format: uri
          maxItems: 10
          description: 피드 배너 이미지 목록
        caption:
          type: string
          maxLength: 2200
          description: Post 상세 내용
        type:
          allOf:
            - $ref: '#/components/schemas/EventType'
          description: 이벤트 유형
        location:
          type: string
          nullable: true
          description: 상세주소
        contact:
          type: string
          nullable: true
          description: 연락처
        pricing:
          type: integer
          format: uint64
          nullable: true
          description: 가격
        discountRate:
          type: integer
          format: uint64
          nullable: true
          description: 할인률
        startsAt:
          type: string
          format: date-time
          description: 오픈일
        endsAt:
          type: string
          format: date-time
          nullable: true
          description: 종료일
        link:
          type: string
          format: uri
          nullable: true
          description: 출처 링크
      description: 상속용 Post 클래스
    BaseUser:
      type: object
      required:
        - gender
        - email
        - telephone
        - birth
      properties:
        gender:
          oneOf:
            - $ref: '#/components/schemas/Gender'
          nullable: true
          description: 회원 성별
        email:
          type: string
          format: email
          description: 이메일
        telephone:
          type: string
          nullable: true
          description: 전화번호
        birth:
          type: string
          format: date
          nullable: true
          description: 생년월일
      allOf:
        - $ref: '#/components/schemas/BaseUserProfile'
      description: |-
        상속용 User 클래스

        주로 사용자가 회원가입 후 추가적으로 입력하는 개인정보들이 포함된다.
    BaseUserProfile:
      type: object
      required:
        - name
      properties:
        name:
          type: string
          description: 사용자 실명
      allOf:
        - $ref: '#/components/schemas/Identifiable'
      description: 상속용 UserProfile 클래스
    Company:
      type: object
      required:
        - id
      properties:
        id:
          allOf:
            - $ref: '#/components/schemas/id'
          description: 고유 ID
      allOf:
        - $ref: '#/components/schemas/BaseCompany'
      description: 기업 정보
    CreatePost:
      type: object
      required:
        - companyId
        - tagIds
      properties:
        companyId:
          allOf:
            - $ref: '#/components/schemas/id'
          description: Post를 생성할 기업의 ID
        tagIds:
          type: array
          items:
            $ref: '#/components/schemas/id'
          description: 태그 id 목록
      allOf:
        - $ref: '#/components/schemas/BasePost'
      description: Post 생성 시 입력할 정보
    EventType:
      type: string
      enum:
        - online
        - offline
        - both
      description: |-
        이벤트 유형

        - `online`: 온라인
        - `offline`: 오프라인
        - `both`: 온/오프라인
    Gender:
      type: string
      enum:
        - Woman
        - Man
        - Other
      description: |-
        회원 성별

        - `Woman`: 여성
        - `Man`: 남성
        - `Other`: 기타
    Identifiable:
      type: object
      required:
        - id
      properties:
        id:
          allOf:
            - $ref: '#/components/schemas/id'
          description: 고유 ID
    Image:
      type: object
      required:
        - filename
        - image
      properties:
        filename:
          type: string
        image:
          type: string
          format: byte
      description: 이미지 업로드 정보
    Location:
      type: string
      enum:
        - Seoul
        - Gyeonggi
        - Incheon
        - Gangwon
        - Sejong
        - Daejeon
        - Chungbuk
        - Chungnam
        - Busan
        - Daegu
        - Ulsan
        - Gyeongbuk
        - Gyeongnam
        - Gwangju
        - Jeonbuk
        - Jeonnam
        - Jeju
      description: |-
        지역 값

        - 서울
        - 경기
        - 인천
        - 강원
        - 세종
        - 대전
        - 충북
        - 충남
        - 부산
        - 대구
        - 울산
        - 경북
        - 경남
        - 광주
        - 전북
        - 전남
        - 제주
    Post:
      type: object
      required:
        - id
        - createAt
        - company
        - tags
        - likes
        - views
        - isLiked
        - isSaved
      properties:
        id:
          allOf:
            - $ref: '#/components/schemas/id'
          description: 고유 ID
        createAt:
          type: string
          format: date-time
          description: 게시일
        company:
          allOf:
            - $ref: '#/components/schemas/Company'
          description: Post를 등록한 기업
        tags:
          type: array
          items:
            $ref: '#/components/schemas/Tag'
          description: 태그 목록
        likes:
          type: integer
          format: uint64
          description: 좋아요 수
        views:
          type: integer
          format: uint64
          description: 조회수
        isLiked:
          type: boolean
          description: 현재 로그인된 사용자가 이미 좋아요한 Post인지 여부
        isSaved:
          type: boolean
          description: 현재 로그인된 사용자가 이미 마이페이지에 저장한 Post인지 여부
      allOf:
        - $ref: '#/components/schemas/BasePost'
      description: Post 정보
    SortOption:
      type: string
      enum:
        - recommended
        - latest
        - deadline
        - higherDiscount
        - lowserDiscount
        - higherPrice
        - lowserPrice
        - farthest
        - nearest
      description: |-
        Post 추천 기준

        - `recommended`: 추천순
        - `latest`: 게시순
        - `deadline`: 마감순
        - `higherDiscount`: 높은 할인순
        - `lowserDiscount`: 낮은 할인순
        - `higherPrice`: 높은 가격순
        - `lowserPrice`: 낮은 가격순
        - `farthest`: 먼 거리순
        - `nearest`: 가까운 거리순
    Tag:
      type: object
      required:
        - displayName
      properties:
        displayName:
          type: string
          description: 태그명
      allOf:
        - $ref: '#/components/schemas/Identifiable'
      description: 태그 정보
    User:
      type: object
      required:
        - oAuthProvider
        - createAt
        - lastLogin
      properties:
        oAuthProvider:
          type: string
          description: 사용한 소셜 로그인 서비스
        createAt:
          type: string
          format: date-time
          description: 회원 가입일
        lastLogin:
          type: string
          format: date-time
          description: 마지막 로그인 시점
      allOf:
        - $ref: '#/components/schemas/BaseUser'
      description: 회원 정보
    UserProfile:
      type: object
      required:
        - follows
        - saved
      properties:
        follows:
          type: object
          required:
            - items
            - page
          properties:
            items:
              type: array
              items:
                type: array
                items:
                  $ref: '#/components/schemas/Company'
              description: 실제 데이터
            page:
              type: object
              properties:
                totalRecords:
                  type: integer
                  format: uint64
                  description: 검색된 총 항목 수
                totalPages:
                  type: integer
                  format: uint64
                  description: 총 페이지 갯수
                pageSize:
                  type: integer
                  format: uint64
                  description: 현재 페이지에 포함된 항목 수
                nextPage:
                  type: integer
                  format: uint64
                  nullable: true
                  description: |-
                    다음 페이지 번호

                    현재 페이지가 마지막 페이지인 경우 `nextPage`는 `null`이 된다.
                nextRecords:
                  type: integer
                  format: uint64
                  description: |-
                    다음 페이지에 나타날 항목 수

                    다음 페이지가 마지막 페이지일 경우 페이지 크기로 나누어 떨어지지 않는 값이 들어간다.
                    다음 페이지 로딩 전 표시할 스켈레톤 갯수를 맞추기 위해 사용한다.
              required:
                - totalRecords
                - totalPages
                - pageSize
                - nextPage
                - nextRecords
              description: 페이지 메타데이터
          description: 사용자가 팔로우 중인 기업 목록
        saved:
          type: object
          required:
            - items
            - page
          properties:
            items:
              type: array
              items:
                type: array
                items:
                  $ref: '#/components/schemas/Post'
              description: 실제 데이터
            page:
              type: object
              properties:
                totalRecords:
                  type: integer
                  format: uint64
                  description: 검색된 총 항목 수
                totalPages:
                  type: integer
                  format: uint64
                  description: 총 페이지 갯수
                pageSize:
                  type: integer
                  format: uint64
                  description: 현재 페이지에 포함된 항목 수
                nextPage:
                  type: integer
                  format: uint64
                  nullable: true
                  description: |-
                    다음 페이지 번호

                    현재 페이지가 마지막 페이지인 경우 `nextPage`는 `null`이 된다.
                nextRecords:
                  type: integer
                  format: uint64
                  description: |-
                    다음 페이지에 나타날 항목 수

                    다음 페이지가 마지막 페이지일 경우 페이지 크기로 나누어 떨어지지 않는 값이 들어간다.
                    다음 페이지 로딩 전 표시할 스켈레톤 갯수를 맞추기 위해 사용한다.
              required:
                - totalRecords
                - totalPages
                - pageSize
                - nextPage
                - nextRecords
              description: 페이지 메타데이터
          description: 사용자가 저장한 포스트 목록
      allOf:
        - $ref: '#/components/schemas/BaseUserProfile'
      description: |-
        회원 프로필 정보

        프로필 페이지에 보여줄 정보들이 포함된다.
    Versions:
      type: string
      enum:
        - v0.1.0
        - v1.0.0
    id:
      type: string
      format: uuid
      description: 고유 ID
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
servers:
  - url: https://api.aroundy.teambigbox.com
    description: 엔드포인트
    variables: {}
